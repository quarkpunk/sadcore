import{_ as L,E as F,c as i,d as a,i as v,f as m,g as n,n as C,t as D,a as R,M as T,b as V,N as j,r as S,x as I,j as l,y as B,e as u,F as z,h as H,w as f,k as O,B as k,T as J,z as Y}from"./main-C64n2lof.js";import{Y as q}from"./v3-infinite-loading.es-CZxQr_xO.js";import{u as G}from"./dating-CZuij7ec.js";import{I as K}from"./Image-CJHyTfsy.js";import{M as P}from"./MobileHeader-BjF7Vej2.js";import{C as Q}from"./CardContent-uVO5xgEC.js";import"./Chip-CSlP0X1c.js";const W={class:"card-like",id:"noselect"},X={__name:"CardLike",props:{data:Object},setup(g){const o=g;return(b,w)=>{const d=F("Icon-Sadcore");return a(),i("div",W,[o.data.user.photo?(a(),v(K,{key:0,class:"image",id:"noevents",src:o.data.user.photo.base,placeholder:o.data.user.photo.small,cover:"",blur:""},null,8,["src","placeholder"])):m("",!0),n("div",{class:C(["gradient",{light:o.super}])},null,2),n("p",{class:C(["subtitle name",{light:o.super}])},D(o.data.user.name),3),o.data.super?(a(),v(d,{key:1,width:25,height:25,class:"icon",color:"var(--color-gray-0)"})):m("",!0)])}}},Z=L(X,[["__scopeId","data-v-be8deb11"]]),ee={class:"col",style:{height:"0"}},te={key:0,class:"flex mobile-scroll-view mobile-safe likes-grid",id:"results"},oe={key:1,class:"col flex",id:"noevents"},se={style:{margin:"auto","text-align":"center",color:"var(--color-gray-500)"}},ae={style:{"white-space":"pre-wrap"}},le={key:0,class:"like-user"},ne={class:"flex",style:{overflow:"auto"}},re={__name:"Likes",setup(g){const{t:o}=R(),b=Y(),w=T(),d=G(),p=V(),c=j(),M=+new Date,t=S(null),r=S(!1);async function y(e){const s=await c.fetchUser(e);s&&(t.value=s,t.value.id_local=e,console.log(t.value))}const x=()=>{p.components.navbar.show=!r.value};function _(){r.value=!1}async function U(e){t.value||await y(e),t.value&&t.value.id_local!=e&&await y(e),r.value=!0,p.components.navbar.show=!1}async function A(){t.value&&(console.log(t.value._id),await d.like(t.value._id),_())}const E=async e=>{try{if(e.loading(),!await c.fetchMore()){e.complete(),console.log("likes loaded");return}e.loaded()}catch{e.error()}};async function $(e){switch(e){case"delete":await d.delete(t.value.id_local)&&_();break;case"delete_report":p.components.navbar.show=!0,b.push(`/report?route=like&id=${t.value.id_local}&delete=true`);break}}function N(){t.value&&w.open("user-delete",{text:o("modals.likeDelete"),icon:"Icon-Heart",image:t.value.photos[0]?.base||null,textDeleteAndReport:o("button.deleteAndReport"),textDelete:o("button.deleteJust"),textCancel:o("button.cancel")},{accept:$,close:()=>{}})}return(e,s)=>(a(),i("div",ee,[I(l(P,{title:e.$t("pages.likes.title")},null,8,["title"]),[[B,!r.value]]),u(p).state.isOnline&&u(c).data.length>0?I((a(),i("div",te,[(a(!0),i(z,null,H(u(c).data,h=>(a(),v(Z,{key:h._id,data:h,onClick:ie=>U(h._id)},null,8,["data","onClick"]))),128)),u(c).data.length>=7?(a(),v(u(q),{key:0,target:"#results",identifier:M,onInfinite:E},{complete:f(()=>[...s[0]||(s[0]=[n("div",null,null,-1)])]),error:f(()=>[...s[1]||(s[1]=[n("div",null,"Error",-1)])]),_:1})):m("",!0)],512)),[[B,!r.value]]):(a(),i("div",oe,[n("div",se,[n("p",ae,D(e.$t("pages.likes.empty")),1)])])),l(J,{name:"t-slide-up",onAfterLeave:x,onAfterEnter:x},{default:f(()=>[r.value&&t.value?(a(),i("div",le,[n("section",ne,[l(Q,{user:t.value,"show-button-close":!1,"show-button-report":!1,open:""},null,8,["user"])]),l(O,null,{default:f(()=>[l(k,{text:e.$t("button.back"),flex:"",onClick:_},null,8,["text"]),l(k,{text:e.$t("button.like"),flex:"",onClick:A},null,8,["text"]),l(k,{text:e.$t("button.delete"),flex:"",onClick:N,type:"error"},null,8,["text"])]),_:1})])):m("",!0)]),_:1})]))}},_e=L(re,[["__scopeId","data-v-b5591f9d"]]);export{_e as default};
