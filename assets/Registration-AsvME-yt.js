import{_ as P,c as r,d,F as W,h as J,n as K,u as O,m as Q,p as X,q as Y,s as Z,r as s,v as _,e as ee,g as o,t as y,j as t,I as A,B as V,w as G,f as H,T as N,i as le,x as U,y as T,z as ae}from"./main-DrkWV9n8.js";import{_ as R,G as F}from"./InputCity-Dzdh-86T.js";import{_ as i}from"./InputModal-BEuBqpmo.js";import"./Image-DxUq8eBe.js";const te={class:"stepper"},oe={__name:"Stepper",props:{step:{type:Number,default:1},max:{type:Number,default:3}},setup(D){const b=D;return(p,k)=>(d(),r("div",te,[(d(!0),r(W,null,J(b.max,x=>(d(),r("div",{key:x,class:K(["step",{active:x<=b.step}])},null,2))),128))]))}},ue=P(oe,[["__scopeId","data-v-cf7fc146"]]),se={key:0,class:"desktop"},ne={class:"container"},de={class:"col",style:{width:"370px",gap:"70px"}},re={class:"col gap-30"},ie={class:"col gap-20"},pe={class:"col gap-10"},ve={class:"col gap-20"},me={class:"col gap-10"},ce={class:"row gap-15"},ye={class:"col gap-20"},he={key:1,class:"mobile mobile-safe"},ge={class:"label"},fe={key:0,class:"text"},$e={key:1,class:"text"},Ve={key:2,class:"text"},be={class:"col flex"},ke={key:0,class:"col gap-10"},xe={key:1,class:"col gap-10"},Se={class:"row gap-15",style:{padding:"20px 0px"}},we=3,Ue={__name:"Registration",setup(D){const{isDesktop:b}=O(),p=Q(),k=X(),x=Y(),z=Z(),j=ae(),u=s(1),v=s(""),m=s(null),h=s(0),c=s(0),g=s(0),f=s(0),n=s(),S=s(p.data.ageArray),B=s(p.data.genderArray),I=s(p.data.bodyTypeArray),w=s(p.data.bodyHeightArray),$=_(()=>!(v.value.length<2||m.value==null||c.value==0||n.value.filter(l=>l===null).length==4));async function q(){const e={name:v.value,city:m.value,age:p.valueToData(S.value,h.value)|0,gender:c.value,desc:"",tags:[],body:{type:g.value,height:p.valueToData(w.value,f.value)|0}};return await k.create(e)}async function E(){try{for(let e=0;e<n.value.length;e++){if(n.value[e]==null||!n.value[e]._local)continue;const l=new FormData;l.append("image",n.value[e]._local.base),l.append("image_small",n.value[e]._local.small),await k.uploadPhoto(n.value[e].index,l,x.guestToken)}return!0}catch{return!1}}async function C(){if(!$.value)return;const l=await q(),a=await E();(!l||!a)&&console.error("please retry again"),await k.fetch(),z.connectToken(),j.push("/dating")}function L(){u.value+1<=we&&(u.value+=1)}function M(){u.value-1>=1&&(u.value-=1)}return(e,l)=>ee(b)?(d(),r("div",se,[o("div",ne,[o("div",de,[o("div",re,[o("div",ie,[o("h4",null,y(e.$t("pages.reg.general")),1),o("div",pe,[t(A,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=a=>v.value=a),placeholder:e.$t("input.name.placeholder")},null,8,["modelValue","placeholder"]),t(i,{"modal-type":"vertical-scroller","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-value":e.$t("input.age.value"),"text-not-value":e.$t("input.age.placeholder"),values:S.value,modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=a=>h.value=a)},null,8,["modal-title","placeholder","text-value","text-not-value","values","modelValue"]),t(R,{placeholder:e.$t("data.none"),"text-value":e.$t("input.city.value"),"text-not-value":e.$t("input.city.placeholder"),modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=a=>m.value=a)},null,8,["placeholder","text-value","text-not-value","modelValue"])])]),o("div",ve,[o("h4",null,y(e.$t("pages.reg.appearance")),1),o("div",me,[t(i,{icon:"Icon-Gender","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.gender.placeholder"),values:B.value,modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=a=>c.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Body","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyType.placeholder"),values:I.value,modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=a=>g.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Ruler","modal-type":"vertical-scroller","modal-title":e.$t("modals.value"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyHeight.placeholder"),values:w.value,modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=a=>f.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"])])])]),o("div",ce,[t(V,{text:e.$t("button.back"),class:"flex"},null,8,["text"]),t(V,{text:e.$t("button.save"),onClick:C,class:"flex",disabled:!$.value,type:$.value?"secondary":"primary"},null,8,["text","disabled","type"])])]),o("div",ye,[o("h4",null,y(e.$t("pages.reg.photos")),1),t(F,{modelValue:n.value,"onUpdate:modelValue":l[6]||(l[6]=a=>n.value=a),style:{height:"100%",width:"370px"}},null,8,["modelValue"])])])])):(d(),r("div",he,[o("div",null,[t(ue,{step:u.value,style:{padding:"10px 0px"}},null,8,["step"]),o("div",ge,[t(N,{name:"t-slide-up",mode:"out-in"},{default:G(()=>[u.value==1?(d(),r("h3",fe,y(e.$t("pages.reg.general")),1)):u.value==2?(d(),r("h3",$e,y(e.$t("pages.reg.appearance")),1)):u.value==3?(d(),r("h3",Ve,y(e.$t("pages.reg.photos")),1)):H("",!0)]),_:1})])]),o("div",be,[t(N,{name:"t-fade-router",mode:"out-in"},{default:G(()=>[u.value==1?(d(),r("div",ke,[t(A,{modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=a=>v.value=a),placeholder:e.$t("input.name.placeholder")},null,8,["modelValue","placeholder"]),t(i,{"modal-type":"vertical-scroller","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-value":e.$t("input.age.value"),"text-not-value":e.$t("input.age.placeholder"),values:S.value,modelValue:h.value,"onUpdate:modelValue":l[8]||(l[8]=a=>h.value=a)},null,8,["modal-title","placeholder","text-value","text-not-value","values","modelValue"]),t(R,{placeholder:e.$t("data.none"),"text-value":e.$t("input.city.value"),"text-not-value":e.$t("input.city.placeholder"),modelValue:m.value,"onUpdate:modelValue":l[9]||(l[9]=a=>m.value=a)},null,8,["placeholder","text-value","text-not-value","modelValue"])])):u.value==2?(d(),r("div",xe,[t(i,{icon:"Icon-Gender","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.gender.placeholder"),values:B.value,modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=a=>c.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Body","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyType.placeholder"),values:I.value,modelValue:g.value,"onUpdate:modelValue":l[11]||(l[11]=a=>g.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Ruler","modal-type":"vertical-scroller","modal-title":e.$t("modals.value"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyHeight.placeholder"),values:w.value,modelValue:f.value,"onUpdate:modelValue":l[12]||(l[12]=a=>f.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"])])):u.value==3?(d(),le(F,{key:2,modelValue:n.value,"onUpdate:modelValue":l[13]||(l[13]=a=>n.value=a),style:{height:"90%"}},null,8,["modelValue"])):H("",!0)]),_:1})]),o("div",Se,[U(t(V,{text:e.$t("button.back"),class:"flex",onClick:M},null,8,["text"]),[[T,u.value>1]]),U(t(V,{text:e.$t("button.next"),class:"flex",onClick:L},null,8,["text"]),[[T,u.value<3]]),U(t(V,{text:e.$t("button.save"),class:"flex",onClick:C,disabled:!$.value,type:$.value?"secondary":"primary"},null,8,["text","disabled","type"]),[[T,u.value==3]])])]))}},Ce=P(Ue,[["__scopeId","data-v-81abec39"]]);export{Ce as default};
