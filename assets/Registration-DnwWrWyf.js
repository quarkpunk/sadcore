import{_ as F,c as r,o as d,F as K,r as O,n as Q,u as X,a as Y,b as Z,d as _,e as ee,f as le,g as ae,h as n,i as te,j as oe,k as o,t as h,l as t,I as C,B as b,w as G,m as H,T as N,p as se,q as U,v as T,s as ue}from"./main-CiJLxzIP.js";import{_ as R,G as P}from"./InputCity-CBfUy2d_.js";import{_ as i}from"./InputModal-DIiFerRb.js";const ne={class:"stepper"},de={__name:"Stepper",props:{step:{type:Number,default:1},max:{type:Number,default:3}},setup(D){const k=D;return(S,p)=>(d(),r("div",ne,[(d(!0),r(K,null,O(k.max,v=>(d(),r("div",{key:v,class:Q(["step",{active:v<=k.step}])},null,2))),128))]))}},re=F(de,[["__scopeId","data-v-cf7fc146"]]),ie={key:0,class:"desktop"},pe={class:"container"},ve={class:"col",style:{width:"370px",gap:"70px"}},ce={class:"col gap-30"},me={class:"col gap-20"},ye={class:"col gap-10"},he={class:"col gap-20"},ge={class:"col gap-10"},fe={class:"row gap-15"},$e={class:"col gap-20"},Ve={key:1,class:"mobile mobile-safe"},be={class:"label"},ke={key:0,class:"text"},Se={key:1,class:"text"},xe={key:2,class:"text"},we={class:"col flex"},Ue={key:0,class:"col gap-10"},Te={key:1,class:"col gap-10"},De={class:"row gap-15",style:{padding:"20px 0px"}},Be=3,Ie={__name:"Registration",setup(D){const{isDesktop:k}=X(),S=Y(),p=Z(),v=_(),E=ee(),j=le(),q=ae(),z=ue(),s=n(1),c=n(""),m=n(null),g=n(0),y=n(0),f=n(0),$=n(0),u=n(),x=n(p.data.ageArray),B=n(p.data.genderArray),I=n(p.data.bodyTypeArray),w=n(p.data.bodyHeightArray),V=te(()=>!(c.value.length<2||m.value==null||y.value==0||!u.value||u.value.filter(l=>l===null).length==4));async function L(){const e={name:c.value,city:m.value,age:p.valueToData(x.value,g.value)|0,gender:y.value,desc:"",tags:[],body:{type:f.value,height:p.valueToData(w.value,$.value)|0}};return await v.create(e)}async function M(){try{for(let e=0;e<u.value.length;e++){if(u.value[e]==null||!u.value[e]._local)continue;const l=new FormData;l.append("image",u.value[e]._local.base),l.append("image_small",u.value[e]._local.small),await v.uploadPhoto(u.value[e].index,l,E.guestToken)}return!0}catch{return!1}}async function A(){if(!V.value)return;S.components.locker.show=!0;const l=await L(),a=await M();(!l||!a)&&(S.components.locker.show=!1,q.openError("Please retry again")),await v.fetch(),j.connectToken(),S.components.locker.show=!1,z.push("/dating")}function W(){s.value+1<=Be&&(s.value+=1)}function J(){s.value-1>=1&&(s.value-=1)}return(e,l)=>oe(k)?(d(),r("div",ie,[o("div",pe,[o("div",ve,[o("div",ce,[o("div",me,[o("h4",null,h(e.$t("pages.reg.general")),1),o("div",ye,[t(C,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=a=>c.value=a),placeholder:e.$t("input.name.placeholder")},null,8,["modelValue","placeholder"]),t(i,{"modal-type":"vertical-scroller","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-value":e.$t("input.age.value"),"text-not-value":e.$t("input.age.placeholder"),values:x.value,modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=a=>g.value=a)},null,8,["modal-title","placeholder","text-value","text-not-value","values","modelValue"]),t(R,{placeholder:e.$t("data.none"),"text-value":e.$t("input.city.value"),"text-not-value":e.$t("input.city.placeholder"),modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=a=>m.value=a)},null,8,["placeholder","text-value","text-not-value","modelValue"]),t(i,{icon:"Icon-Gender","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.gender.placeholder"),values:B.value,modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=a=>y.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"])])]),o("div",he,[o("h4",null,h(e.$t("pages.reg.appearance")),1),o("div",ge,[t(i,{icon:"Icon-Body","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyType.placeholder"),values:I.value,modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=a=>f.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Ruler","modal-type":"vertical-scroller","modal-title":e.$t("modals.value"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyHeight.placeholder"),values:w.value,modelValue:$.value,"onUpdate:modelValue":l[5]||(l[5]=a=>$.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"])])])]),o("div",fe,[t(b,{text:e.$t("button.back"),class:"flex"},null,8,["text"]),t(b,{text:e.$t("button.save"),onClick:A,class:"flex",disabled:!V.value,type:V.value?"secondary":"primary"},null,8,["text","disabled","type"])])]),o("div",$e,[o("h4",null,h(e.$t("pages.reg.photos")),1),t(P,{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value=a),style:{height:"100%",width:"370px"}},null,8,["modelValue"])])])])):(d(),r("div",Ve,[o("div",null,[t(re,{step:s.value,style:{padding:"10px 0px"}},null,8,["step"]),o("div",be,[t(N,{name:"t-slide-up",mode:"out-in"},{default:G(()=>[s.value==1?(d(),r("h3",ke,h(e.$t("pages.reg.general")),1)):s.value==2?(d(),r("h3",Se,h(e.$t("pages.reg.appearance")),1)):s.value==3?(d(),r("h3",xe,h(e.$t("pages.reg.photos")),1)):H("",!0)]),_:1})])]),o("div",we,[t(N,{name:"t-fade-router",mode:"out-in"},{default:G(()=>[s.value==1?(d(),r("div",Ue,[t(C,{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=a=>c.value=a),placeholder:e.$t("input.name.placeholder")},null,8,["modelValue","placeholder"]),t(i,{"modal-type":"vertical-scroller","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-value":e.$t("input.age.value"),"text-not-value":e.$t("input.age.placeholder"),values:x.value,modelValue:g.value,"onUpdate:modelValue":l[8]||(l[8]=a=>g.value=a)},null,8,["modal-title","placeholder","text-value","text-not-value","values","modelValue"]),t(R,{placeholder:e.$t("data.none"),"text-value":e.$t("input.city.value"),"text-not-value":e.$t("input.city.placeholder"),modelValue:m.value,"onUpdate:modelValue":l[9]||(l[9]=a=>m.value=a)},null,8,["placeholder","text-value","text-not-value","modelValue"]),t(i,{icon:"Icon-Gender","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.gender.placeholder"),values:B.value,modelValue:y.value,"onUpdate:modelValue":l[10]||(l[10]=a=>y.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"])])):s.value==2?(d(),r("div",Te,[t(i,{icon:"Icon-Body","modal-type":"radio","modal-title":e.$t("modals.type"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyType.placeholder"),values:I.value,modelValue:f.value,"onUpdate:modelValue":l[11]||(l[11]=a=>f.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Ruler","modal-type":"vertical-scroller","modal-title":e.$t("modals.value"),placeholder:e.$t("data.none"),"text-not-value":e.$t("input.bodyHeight.placeholder"),values:w.value,modelValue:$.value,"onUpdate:modelValue":l[12]||(l[12]=a=>$.value=a)},null,8,["modal-title","placeholder","text-not-value","values","modelValue"])])):s.value==3?(d(),se(P,{key:2,modelValue:u.value,"onUpdate:modelValue":l[13]||(l[13]=a=>u.value=a),style:{height:"90%"}},null,8,["modelValue"])):H("",!0)]),_:1})]),o("div",De,[U(t(b,{text:e.$t("button.back"),class:"flex",onClick:J},null,8,["text"]),[[T,s.value>1]]),U(t(b,{text:e.$t("button.next"),class:"flex",onClick:W},null,8,["text"]),[[T,s.value<3]]),U(t(b,{text:e.$t("button.save"),class:"flex",onClick:A,disabled:!V.value,type:V.value?"secondary":"primary"},null,8,["text","disabled","type"]),[[T,s.value==3]])])]))}},He=F(Ie,[["__scopeId","data-v-74b28b84"]]);export{He as default};
