import{f as L,g as T,r as m,h as $,c as a,o,a as e,b as s,I as x,B as r,d as p,F as z,e as E,i as f,j as _,k as h,l as w,t as n,m as C}from"./main-DaUflbHC.js";import{d as O}from"./date-Cj9LxC6Y.js";import{C as B}from"./CardContent-Xg92B4gS.js";import{_ as j}from"./InputModal-DPa6se1y.js";import"./Chip-DMbQ-2xr.js";const A={class:"col",style:{height:"100%"}},q={key:0,class:"col flex gap-20"},G={class:"row gap-10"},H={class:"col flex gap-10"},J={class:"list-item"},K={class:"flex"},M={class:"row gap-5"},P={style:{margin:"auto"}},Q={class:"row gap-15 flex-align-center"},W={key:1,style:{margin:"auto"}},X={key:1,class:"col gap-15",style:{height:"100%"}},Y={class:"row gap-10"},Z={class:"row flex gap-15",style:{height:"100%"}},ee={key:0,class:"col flex gap-15"},te={key:0,class:"col gap-15"},oe={key:1,class:"report-item-image none"},le={key:1,class:"report-item-card-container"},ae={key:1,class:"col flex gap-15"},se={key:0,class:"col gap-15"},re={key:1,class:"report-item-image none"},ne={key:1,class:"report-item-card-container"},ie={class:"report-details"},fe={__name:"Reports",setup(ue){const y=L(),F=T(),g=m(0),S=["none",...F.data.reports],t=m(null),k=m(!1),i=$(),c=m(null),d=m(null);async function V(v){c.value=null,d.value=null;const l=await i.fetchOne(v);l&&(t.value=l)}async function D(){t.value=null}async function U(v){if(await i.delete(v)){y.openInfo("Success delete"),await i.fetch();return}y.openError("Failed delete")}async function I(v){t.value&&(c.value=await i.fetchUserFull(t.value.from._id),c.value&&C(c.value))}async function N(v){t.value&&(d.value=await i.fetchUserFull(t.value.to._id),d.value&&C(d.value))}async function R(){k.value=!0,await i.fetch(),k.value=!1}return(v,l)=>(o(),a("div",A,[t.value==null?(o(),a("div",q,[e("div",G,[s(x,{placeholder:"Дата, например 26.09.2025"}),s(x,{placeholder:"ID пользователя"}),s(j,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=u=>g.value=u),textNotValue:"Тип жалобы",textValue:"",modalTitle:"Тип жалобы",values:S},null,8,["modelValue"]),s(r,{text:"Найти",onClick:R,flex:""})]),e("div",H,[p(i).data.length>0?(o(!0),a(z,{key:0},E(p(i).data,u=>(o(),a("div",J,[e("div",K,[e("div",M,[e("code",null,n(u.route),1),e("code",null,n(u.type),1)]),e("p",null,n(u.text),1),e("p",P,n(p(O)(u.created)),1)]),e("div",Q,[s(r,{size:"small",text:"Открыть",onClick:b=>V(u._id)},null,8,["onClick"]),s(r,{size:"small",text:"Удалить",onClick:b=>U(u._id)},null,8,["onClick"])])]))),256)):(o(),a("div",W,[...l[1]||(l[1]=[e("p",null,"Тут ничего нет",-1)])]))])])):(o(),a("div",X,[e("div",Y,[l[2]||(l[2]=e("h3",{style:{width:"100%"}},"Репорт",-1)),s(r,{text:"Удалить",type:"secondary"}),s(r,{text:"Закрыть",onClick:D})]),e("div",Z,[t.value.from?(o(),a("div",ee,[c.value?(o(),a("div",le,[s(B,{open:"",user:c.value,showButtonClose:!1,showButtonReport:!1},null,8,["user"])])):(o(),a("div",te,[l[4]||(l[4]=e("h5",{class:"gray"},"От кого",-1)),t.value.from.photo?(o(),_(w,{key:0,cover:"",id:"noevents",class:"report-item-image",placeholder:p(h)(t.value.from.photo.small),src:p(h)(t.value.from.photo.base)},null,8,["placeholder","src"])):(o(),a("div",oe,[...l[3]||(l[3]=[e("p",{style:{margin:"auto"}},"No image",-1)])])),e("h4",null,n(t.value.from.name)+" "+n(t.value.from.age),1),s(r,{onClick:I,text:"Загрузить полную информацию"}),s(r,{text:"Забанить",type:"error",flex:""})])),c.value?(o(),_(r,{key:2,text:"Забанить",type:"error"})):f("",!0)])):f("",!0),t.value.to?(o(),a("div",ae,[d.value?(o(),a("div",ne,[s(B,{open:"",user:d.value,showButtonClose:!1,showButtonReport:!1},null,8,["user"])])):(o(),a("div",se,[l[6]||(l[6]=e("h5",{class:"gray"},"На кого",-1)),t.value.to.photo?(o(),_(w,{key:0,cover:"",id:"noevents",class:"report-item-image",placeholder:p(h)(t.value.to.photo.small),src:p(h)(t.value.to.photo.base)},null,8,["placeholder","src"])):(o(),a("div",re,[...l[5]||(l[5]=[e("p",{style:{margin:"auto"}},"No image",-1)])])),e("h4",null,n(t.value.to.name)+" "+n(t.value.to.age),1),s(r,{onClick:N,text:"Загрузить полную информацию"}),s(r,{text:"Забанить",type:"error",flex:""})])),d.value?(o(),_(r,{key:2,text:"Забанить",type:"error"})):f("",!0)])):f("",!0)]),e("div",ie,[e("p",null,"ID: "+n(t.value._id),1),e("p",null,"Создан: "+n(t.value.created),1),e("p",null,"Текст: "+n(t.value.text),1)])]))]))}};export{fe as default};
