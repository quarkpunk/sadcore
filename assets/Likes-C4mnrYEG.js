import{_ as I,J as F,d,e as a,j as v,g as m,h as n,O as N,p as C,t as M,a as O,P as T,b as V,Q as j,r as S,G as H,R as J,A as L,k as l,C as B,f as u,F as z,i as G,w as f,l as P,B as h,T as Q,n as Y}from"./main-BUvHvxLs.js";import{Y as q}from"./v3-infinite-loading.es-CEfPvyom.js";import{u as K}from"./dating-Dh7MClPR.js";import{M as W}from"./MobileHeader-BC49UA8Z.js";import{C as X}from"./CardContent-odkx8Cti.js";import"./Chip-Nzc7Cizh.js";const Z={class:"card-like",id:"noselect"},ee={__name:"CardLike",props:{data:Object},setup(g){const o=g;return(w,b)=>{const p=F("Icon-Sadcore");return a(),d("div",Z,[o.data.user.photo?(a(),v(N,{key:0,class:"image",id:"noevents",src:o.data.user.photo.base,placeholder:o.data.user.photo.small,cover:"",blur:""},null,8,["src","placeholder"])):m("",!0),n("div",{class:C(["gradient",{light:o.super}])},null,2),n("p",{class:C(["subtitle name",{light:o.super}])},M(o.data.user.name),3),o.data.super?(a(),v(p,{key:1,width:25,height:25,class:"icon",color:"var(--color-gray-0)"})):m("",!0)])}}},te=I(ee,[["__scopeId","data-v-19d2fde8"]]),oe={class:"col",style:{height:"0"}},se={key:0,class:"flex mobile-scroll-view mobile-safe likes-grid",id:"results"},ae={key:1,class:"col flex",id:"noevents"},le={style:{margin:"auto","text-align":"center",color:"var(--color-gray-500)"}},ne={style:{"white-space":"pre-wrap"}},re={key:0,class:"like-user"},ie={class:"flex",style:{overflow:"auto"}},ce={__name:"Likes",setup(g){const{t:o}=O(),w=Y(),b=T(),p=K(),r=V(),i=j(),D=+new Date,t=S(null),c=S(!1);async function y(e){const s=await i.fetchUser(e);s&&(t.value=s,t.value.id_local=e,console.log(t.value))}const x=()=>{r.components.navbar.show=!c.value};function _(){c.value=!1}async function A(e){t.value||await y(e),t.value&&t.value.id_local!=e&&await y(e),c.value=!0,r.components.navbar.show=!1}async function U(){t.value&&(console.log(t.value._id),await p.like(t.value._id),_())}const $=async e=>{try{if(e.loading(),!await i.fetchMore()){e.complete(),console.log("likes loaded");return}e.loaded()}catch{e.error()}};async function E(e){switch(e){case"delete":await p.delete(t.value.id_local)&&_();break;case"delete_report":r.components.navbar.show=!0,w.push(`/report?route=like&id=${t.value.id_local}&delete=true`);break}}function R(){t.value&&b.open("user-delete",{text:o("modals.likeDelete"),icon:"Icon-Heart",image:t.value.photos[0]?.base||null,textDeleteAndReport:o("button.deleteAndReport"),textDelete:o("button.deleteJust"),textCancel:o("button.cancel")},{accept:E,close:()=>{}})}return H(()=>{if(r.mode.mock){i.data=J(15);return}}),(e,s)=>(a(),d("div",oe,[L(l(W,{title:e.$t("pages.likes.title")},null,8,["title"]),[[B,!c.value]]),u(r).state.isOnline&&u(i).data.length>0?L((a(),d("div",se,[(a(!0),d(z,null,G(u(i).data,k=>(a(),v(te,{key:k._id,data:k,onClick:ue=>A(k._id)},null,8,["data","onClick"]))),128)),!u(r).mode.mock&&u(i).data.length>=7?(a(),v(u(q),{key:0,target:"#results",identifier:D,onInfinite:$},{complete:f(()=>[...s[0]||(s[0]=[n("div",null,null,-1)])]),error:f(()=>[...s[1]||(s[1]=[n("div",null,"Error",-1)])]),_:1})):m("",!0)],512)),[[B,!c.value]]):(a(),d("div",ae,[n("div",le,[n("p",ne,M(e.$t("pages.likes.empty")),1)])])),l(Q,{name:"t-slide-up",onAfterLeave:x,onAfterEnter:x},{default:f(()=>[c.value&&t.value?(a(),d("div",re,[n("section",ie,[l(X,{user:t.value,"show-button-close":!1,"show-button-report":!1,open:""},null,8,["user"])]),l(P,null,{default:f(()=>[l(h,{text:e.$t("button.back"),flex:"",onClick:_},null,8,["text"]),l(h,{text:e.$t("button.like"),flex:"",onClick:U},null,8,["text"]),l(h,{text:e.$t("button.delete"),flex:"",onClick:R,type:"error"},null,8,["text"])]),_:1})])):m("",!0)]),_:1})]))}},ke=I(ce,[["__scopeId","data-v-787a0199"]]);export{ke as default};
