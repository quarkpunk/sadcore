import{_ as F,c as r,d,F as M,h as W,n as J,u as K,m as O,p as Q,q as X,s as Y,r as u,v as Z,e as ee,g as o,t as S,j as t,I as C,B as V,w as A,f as G,T as N,i as le,x as w,y as U,z as ae}from"./main-FXtvOfZS.js";import{_ as R,G as H}from"./InputCity-DT2kCGTy.js";import{_ as i}from"./InputModal-eyHCj1cc.js";import"./Image-CgMhDWjt.js";const te={class:"stepper"},oe={__name:"Stepper",props:{step:{type:Number,default:1},max:{type:Number,default:3}},setup(D){const x=D;return(v,_)=>(d(),r("div",te,[(d(!0),r(M,null,W(x.max,b=>(d(),r("div",{key:b,class:J(["step",{active:b<=x.step}])},null,2))),128))]))}},se=F(oe,[["__scopeId","data-v-cf7fc146"]]),ue={key:0,class:"desktop"},ne={class:"container"},de={class:"col",style:{width:"370px",gap:"70px"}},re={class:"col gap-30"},ie={class:"col gap-20"},ve={class:"col gap-10"},pe={class:"col gap-20"},ce={class:"col gap-10"},me={class:"row gap-15"},ye={class:"col gap-20"},ge={key:1,class:"mobile mobile-safe"},fe={class:"label"},he={key:0,class:"text"},Ve={key:1,class:"text"},xe={key:2,class:"text"},_e={class:"col flex"},be={key:0,class:"col gap-10"},ke={key:1,class:"col gap-10"},$e={class:"row gap-15",style:{padding:"20px 0px"}},Se=3,we={__name:"Registration",setup(D){const{isDesktop:x}=K(),v=O(),_=Q(),b=X(),P=Y(),z=ae(),s=u(1),p=u(""),c=u(null),y=u(0),m=u(0),g=u(0),f=u(0),n=u(),k=u(v.data.ageArray),B=u(v.data.genderArray),I=u(v.data.bodyTypeArray),$=u(v.data.bodyHeightArray),h=Z(()=>!(p.value.length<2||c.value==null||m.value==0||n.value.filter(e=>e===null).length==4));async function j(){const l={name:p.value,city:c.value,age:v.valueToData(k.value,y.value)|0,gender:m.value,desc:"",tags:[],body:{type:g.value,height:v.valueToData($.value,f.value)|0}};return await _.create(l)}async function q(){try{for(let l=0;l<n.value.length;l++){if(n.value[l]==null||!n.value[l]._local)continue;const e=new FormData;e.append("image",n.value[l]._local.base),e.append("image_small",n.value[l]._local.small),await _.uploadPhoto(n.value[l].index,e,b.guestToken)}return!0}catch{return!1}}async function T(){if(!h.value)return;const e=await j(),a=await q();(!e||!a)&&console.error("please retry again"),await _.fetch(),P.connect(),z.push("/dating")}function E(){s.value+1<=Se&&(s.value+=1)}function L(){s.value-1>=1&&(s.value-=1)}return(l,e)=>ee(x)?(d(),r("div",ue,[o("div",ne,[o("div",de,[o("div",re,[o("div",ie,[o("h4",null,S(l.$t("pages.reg.general")),1),o("div",ve,[t(C,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:l.$t("input.name.placeholder")},null,8,["modelValue","placeholder"]),t(i,{"modal-title":"Выберите тип","modal-type":"vertical-scroller",placeholder:l.$t("data.none"),"text-value":l.$t("input.age.value"),"text-not-value":l.$t("input.age.placeholder"),values:k.value,modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value=a)},null,8,["placeholder","text-value","text-not-value","values","modelValue"]),t(R,{placeholder:l.$t("data.none"),"text-value":l.$t("input.city.value"),"text-not-value":l.$t("input.city.placeholder"),modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a)},null,8,["placeholder","text-value","text-not-value","modelValue"])])]),o("div",pe,[o("h4",null,S(l.$t("pages.reg.appearance")),1),o("div",ce,[t(i,{icon:"Icon-Gender","modal-title":"Выберите тип","modal-type":"radio",placeholder:l.$t("data.none"),"text-not-value":l.$t("input.gender.placeholder"),values:B.value,modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a)},null,8,["placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Body","modal-title":"Выберите тип","modal-type":"radio",placeholder:l.$t("data.none"),"text-not-value":l.$t("input.bodyType.placeholder"),values:I.value,modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=a=>g.value=a)},null,8,["placeholder","text-not-value","values","modelValue"]),t(i,{icon:"Icon-Ruler","modal-title":"Выберите тип","modal-type":"vertical-scroller",placeholder:l.$t("data.none"),"text-not-value":l.$t("input.bodyHeight.placeholder"),values:$.value,modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a)},null,8,["placeholder","text-not-value","values","modelValue"])])])]),o("div",me,[t(V,{text:l.$t("button.back"),class:"flex"},null,8,["text"]),t(V,{text:l.$t("button.save"),onClick:T,class:"flex",disabled:!h.value,type:h.value?"secondary":"primary"},null,8,["text","disabled","type"])])]),o("div",ye,[o("h4",null,S(l.$t("pages.reg.photos")),1),t(H,{modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=a=>n.value=a),style:{height:"100%",width:"370px"}},null,8,["modelValue"])])])])):(d(),r("div",ge,[o("div",null,[t(se,{step:s.value,style:{padding:"10px 0px"}},null,8,["step"]),o("div",fe,[t(N,{name:"t-slide-up",mode:"out-in"},{default:A(()=>[s.value==1?(d(),r("h3",he,"Расскажи о себе")):s.value==2?(d(),r("h3",Ve,"Что-то ещё")):s.value==3?(d(),r("h3",xe,"Покажи себя")):G("",!0)]),_:1})])]),o("div",_e,[t(N,{name:"t-fade-router",mode:"out-in"},{default:A(()=>[s.value==1?(d(),r("div",be,[t(C,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value=a),placeholder:"Как вас зовут?"},null,8,["modelValue"]),t(i,{"modal-title":"Выберите тип","modal-type":"vertical-scroller","text-not-value":"Сколько вам лет?",values:k.value,modelValue:y.value,"onUpdate:modelValue":e[8]||(e[8]=a=>y.value=a)},null,8,["values","modelValue"]),t(R,{modelValue:c.value,"onUpdate:modelValue":e[9]||(e[9]=a=>c.value=a)},null,8,["modelValue"])])):s.value==2?(d(),r("div",ke,[t(i,{icon:"Icon-Gender","modal-title":"Выберите тип","modal-type":"radio","text-not-value":"Ваш пол",values:B.value,modelValue:m.value,"onUpdate:modelValue":e[10]||(e[10]=a=>m.value=a)},null,8,["values","modelValue"]),t(i,{icon:"Icon-Body","modal-title":"Выберите тип","modal-type":"radio","text-not-value":"Ваше телосложение",values:I.value,modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=a=>g.value=a)},null,8,["values","modelValue"]),t(i,{icon:"Icon-Ruler","modal-title":"Выберите тип","modal-type":"vertical-scroller","text-not-value":"Ваш рост",values:$.value,modelValue:f.value,"onUpdate:modelValue":e[12]||(e[12]=a=>f.value=a)},null,8,["values","modelValue"])])):s.value==3?(d(),le(H,{key:2,modelValue:n.value,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value=a),style:{height:"90%"}},null,8,["modelValue"])):G("",!0)]),_:1})]),o("div",$e,[w(t(V,{text:"Назад",class:"flex",onClick:L},null,512),[[U,s.value>1]]),w(t(V,{text:"Дальше",class:"flex",onClick:E},null,512),[[U,s.value<3]]),w(t(V,{text:"Завершить",class:"flex",onClick:T,disabled:!h.value,type:h.value?"secondary":"primary"},null,8,["disabled","type"]),[[U,s.value==3]])])]))}},Te=F(we,[["__scopeId","data-v-508087c3"]]);export{Te as default};
