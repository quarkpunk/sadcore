import{a4 as y,U as B,b as C,m as T,Q as q,O as R,r as f,V as U,D,c as L,d as N,g as V,j as r,w as M,x as A,B as _,e as I,z as O,y as j,k as z}from"./main-Cko-RMe4.js";import{M as E}from"./MobileHeader-CqlrEW7c.js";import{I as H,_ as Q}from"./InputModal-BhIZ-w5B.js";import{T as $}from"./TextArea-Dga7Cblu.js";import{u as F}from"./dating-CKDPxXej.js";const G=y("report",{state:()=>({data:[]}),actions:{async send(m,t,a,v){if(!m||!t||!a)return!1;const i={to:m,type:t,route:a,text:v||""},n=await B.post("/api/report",i);return console.log("report: ",i),n.status==200||n.status==201}}}),J={class:"col"},K={class:"flex"},P={class:"mobile-safe col gap-10"},te={__name:"ReportUser",setup(m){const t=U(),a=O();C();const v=T(),i=G(),n=q(),w=R(),g=F(),x=["none",...v.data.reports],h=f(!1),c=f(0),l=f(null),k=f(""),d=t.query.delete||null,s=t.query.route||null,e=t.query.id||null;async function S(){if(await i.send(l.value.id,x[c.value],l.value.route,k.value)){if(h.value&&e){switch(t.query.route){case"chat":n.delete(e);break;case"like":g.delete(e);break}console.log("--- user report delete event ---")}switch(t.query.route){case"chat":a.push("/chats");break;case"like":a.push("/likes");break;case"dating":a.push("/dating");break}}}function b(){if(s)switch(s){case"dating":const p=g.find(e);if(p)return p.info.name;case"like":const o=w.find(e);if(o)return o.user.name;case"chat":const u=n.find(e);if(u)return u.user.name;default:return null}}return D(()=>{if(!(!s||!e)){if(d){if(d.toLowerCase()!="true"&&d.toLowerCase()!="false")return;h.value=d.toLowerCase()==="true"}s!="dating"&&s!="like"&&s!="chat"||e.length<20&&e.length>30||(l.value={route:s,id:e,name:b()})}}),(p,o)=>(N(),L("div",J,[V("div",K,[r(E,{title:h.value?"Репорт и удалить":"Репорт"},null,8,["title"]),V("div",P,[r(H,{text:"Пользователь",value:l.value?l.value.name:null},null,8,["value"]),r(Q,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=u=>c.value=u),textNotValue:"Укажитие тип жалобы",textValue:"Тип жалобы",modalTitle:"Тип жалобы",values:x},null,8,["modelValue"]),r($,{modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=u=>k.value=u),height:5,placeholder:"Расскажите о своей проблеме коротко и понятно",spellcheck:"false"},null,8,["modelValue"])])]),r(z,null,{default:M(()=>[r(_,{text:"Назад",class:"flex",onClick:I(a).back},null,8,["onClick"]),A(r(_,{text:"Сообщить",class:"flex",type:"error",disabled:c.value==0,onClick:S},null,8,["disabled"]),[[j,l.value]])]),_:1})]))}};export{te as default};
