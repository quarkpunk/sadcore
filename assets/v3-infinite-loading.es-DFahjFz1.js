import{a2 as C,r as v,a3 as H,c as h,Q as $,K as N,Y as M,o as x,w as O,H as d,i as g,s as R,a as r,b as T,t as w,a1 as E,a4 as V,a5 as q}from"./main-DaUflbHC.js";function D(t,o=null){if(!t)return!1;const e=t.getBoundingClientRect(),n=o?o.getBoundingClientRect():{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth};return e.bottom>=n.top&&e.top<=n.bottom&&e.right>=n.left&&e.left<=n.right}async function K(t){return t?(await E(),t.value instanceof HTMLElement?t.value:t.value?document.querySelector(t.value):null):null}function Q(t){let o=`0px 0px ${t.distance}px 0px`;t.top&&(o=`${t.distance}px 0px 0px 0px`);const e=new IntersectionObserver(n=>{n[0].isIntersecting&&(t.firstload&&t.emit(),t.firstload=!0)},{root:t.parentEl,rootMargin:o});return t.infiniteLoading.value&&e.observe(t.infiniteLoading.value),e}async function y(t,o){if(await E(),!t.top)return;const e=t.parentEl||document.documentElement;e.scrollTop=e.scrollHeight-o}const b=(t,o)=>{const e=t.__vccOpts||t;for(const[n,l]of o)e[n]=l;return e},U={},W=t=>(V("data-v-d3e37633"),t=t(),q(),t),Y={class:"container"},j=W(()=>r("div",{class:"spinner"},null,-1)),z=[j];function A(t,o){return x(),h("div",Y,z)}const F=b(U,[["render",A],["__scopeId","data-v-d3e37633"]]),G={class:"state-error"},J=C({__name:"InfiniteLoading",props:{top:{type:Boolean,default:!1},target:{},distance:{default:0},identifier:{},firstload:{type:Boolean,default:!0},slots:{}},emits:["infinite"],setup(t,{emit:o}){const e=t;let n=null,l=0;const u=v(null),i=v(""),{top:k,firstload:I,distance:_}=e,{identifier:B,target:L}=H(e),a={infiniteLoading:u,top:k,firstload:I,distance:_,parentEl:null,emit(){l=(a.parentEl||document.documentElement).scrollHeight,p.loading(),o("infinite",p)}},p={loading(){i.value="loading"},async loaded(){i.value="loaded",await y(a,l),D(u.value,a.parentEl)&&a.emit()},async complete(){i.value="complete",await y(a,l),n?.disconnect()},error(){i.value="error"}};function f(){n?.disconnect(),n=Q(a)}return $(B,f),N(async()=>{a.parentEl=await K(L),f()}),M(()=>n?.disconnect()),(s,m)=>(x(),h("div",{ref_key:"infiniteLoading",ref:u,class:"v3-infinite-loading"},[O(r("div",null,[d(s.$slots,"spinner",{},()=>[T(F)],!0)],512),[[R,i.value=="loading"]]),i.value=="complete"?d(s.$slots,"complete",{key:0},()=>{var c;return[r("span",null,w(((c=s.slots)==null?void 0:c.complete)||"No more results!"),1)]},!0):g("",!0),i.value=="error"?d(s.$slots,"error",{key:1,retry:a.emit},()=>{var c;return[r("span",G,[r("span",null,w(((c=s.slots)==null?void 0:c.error)||"Oops something went wrong!"),1),r("button",{class:"retry",onClick:m[0]||(m[0]=(...S)=>a.emit&&a.emit(...S))},"retry")])]},!0):g("",!0)],512))}}),X=b(J,[["__scopeId","data-v-4bdee133"]]);export{X as Y};
